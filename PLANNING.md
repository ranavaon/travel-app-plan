# תכנון אפליקציית טיולים – מסמך מלא

## 1. הגדרת MVP (Minimum Viable Product)

### מטרה
אפליקציה אחת שפועלת ב־**Web** וב־**מובייל** (iOS + Android), שמאפשרת לתכנן טיול יום־יום ולעקוב אחר לינה, אטרקציות ורשימות.

---

### 1.1 משתמש ורישום
- **הרשמה/התחברות** – אימייל + סיסמה (או כניסה עם Google/Apple לשלב מתקדם).
- **פרופיל בסיסי** – שם, אימייל (ללא חובה בשלב MVP).

---

### 1.2 טיול
- **יצירת טיול**: שם, תאריך התחלה, תאריך סיום, יעד (אופציונלי).
- **עריכת טיול**: שינוי שם, תאריכים.
- **מחיקת טיול** (עם אישור).
- **רשימת טיולים**: הצגת כל הטיולים של המשתמש (עתיד/עבר – סינון אופציונלי).

---

### 1.3 ימים ולוח זמנים
- **ימים אוטומטיים** – לפי טווח התאריכים של הטיול (יום 1, יום 2...).
- **לכל יום**:
  - **פעילויות** – כותרת, שעה (אופציונלית), תיאור, כתובת/מיקום (למפה).
  - **סדר פעילויות** – גרירה לשינוי סדר.
  - **הוספה/עריכה/מחיקה** של פעילות.
- **מבט "יום"** – מסך אחד שמציג את כל המידע של היום: פעילויות, לינה של אותו יום, אטרקציות.

---

### 1.4 לינה
- **הוספת מקום לינה**: שם, כתובת, תאריך כניסה, תאריך יציאה, הערות, לינק להזמנה.
- **קישור ליום** – הצגת "איפה ישנים" בכל יום רלוונטי (לפי תאריכי כניסה/יציאה).
- עריכה ומחיקה.

---

### 1.5 אטרקציות
- **הוספת אטרקציה**: שם, כתובת/מיקום, שעות פתיחה (טקסט חופשי), מחיר (אופציונלי), קישור, הערות.
- **שיוך ליום** – בחירת יום (או ימים) בטיול שאליו האטרקציה שייכת.
- הצגה ברשימה כללית ובמבט היום.

---

### 1.6 רשימות קניות
- **רשימה אחת לטיול** (או רשימות: "ציוד", "מסמכים", "מכולת" – אופציונלי ב־MVP).
- **פריט**: טקסט, סימון "בוצע" (checkbox).
- הוספה, עריכה, מחיקה, שינוי סדר.

---

### 1.7 מפות (MVP מינימלי)
- **הצגת מיקומים** – פעילויות/לינה/אטרקציות עם כתובת מופיעים על מפה (למשל מפת יום).
- **פתיחת ניווט חיצוני** – כפתור "נווט" שפותח Waze/Google Maps עם הכתובת.

---

### 1.8 צילומי מסמכים (שלב 2)
משתמש יכול לשמור באפליקציה צילומים של מסמכים חשובים לטיול (דרכון, ויזה, ביטוח, הזמנות וכו').

- **שיוך לטיול** – כל מסמך משויך לטיול מסוים (או "כללי" למשתמש – אופציונלי).
- **הוספת מסמך**:
  - צילום במצלמה (במובייל) או העלאת קובץ תמונה (Web/מובייל).
  - כותרת/תיאור (למשל "דרכון", "ויזה", "ביטוח נסיעות").
  - סוג מסמך (אופציונלי): רשימה קבועה או טקסט חופשי.
- **תצוגה** – גלריה/רשימה של המסמכים של הטיול; לחיצה להגדלה/צפייה.
- **עריכה ומחיקה** – שינוי כותרת, מחיקת מסמך (עם אישור).
- **פרטיות ואבטחה** – המסמכים שייכים למשתמש; מומלץ לאחסן מוצפן או עם הרשאות ברורות ב־Backend. ב־MVP/שלב 2 אפשר אחסון פשוט (למשל קבצים בענן של המשתמש או ב־DB כ־blob/base64 עם הגבלת גישה).

---

### מה לא ב־MVP (לשלב 2 ומעבר)
- שיתוף טיול עם משתמשים אחרים.
- תקציב ומעקב הוצאות.
- תזכורות (push).
- מצב offline מלא.
- PWA "התקנה למסך" (אפשר להוסיף מהר אחרי MVP).

---

## 2. מודל נתונים (Data Model)

### 2.1 ישויות עיקריות

```
User
├── id, email, passwordHash, name?, createdAt

Trip
├── id, userId, name, startDate, endDate, destination?, createdAt, updatedAt
├── days[]        (מחושב מתאריכים)
├── accommodations[]
├── attractions[]
├── shoppingItems[] (או shoppingLists[])
├── documents[]   (צילומי מסמכים)

Day (virtual – לא טבלה נפרדת, מחושב מ־Trip.startDate + index)
├── tripId, date, dayIndex (1, 2, 3...)
├── activities[]

Activity
├── id, tripId, dayIndex, title, time?, description?, address?, lat?, lng?, order

Accommodation
├── id, tripId, name, address, checkInDate, checkOutDate, notes?, bookingUrl?, lat?, lng?

Attraction
├── id, tripId, name, address, openingHours?, price?, url?, notes?, lat?, lng?
├── dayIndexes[]   (לאילו ימים שייכת – [1, 2, 3])

ShoppingItem
├── id, tripId, text, done (boolean), order
├── category?     (optional: "ציוד" | "מסמכים" | "כללי")

Document (צילום מסמך)
├── id, tripId, userId
├── title (string)        – כותרת, למשל "דרכון", "ויזה"
├── type? (string)        – סוג: "דרכון" | "ויזה" | "ביטוח" | "הזמנה" | "אחר"
├── fileUrl (string)      – כתובת לתמונה (אחסון: S3, Cloudinary, או blob ב־DB)
├── mimeType? (string)    – image/jpeg, image/png
├── createdAt, updatedAt
```

### 2.2 קשרים
- **User → Trip**: one-to-many.
- **Trip → Activity, Accommodation, Attraction, ShoppingItem, Document**: one-to-many.
- **Day**: לא ישות ב־DB – יום = `(tripId, dayIndex)`. פעילויות מקושרות ל־`dayIndex`.

---

## 3. פירוט מסך "מבט יום" (Day View)

### 3.1 מטרה
מסך אחד שמציג את כל המידע הרלוונטי ליום מסוים בטיול.

### 3.2 אלמנטים במסך
| אלמנט | מקור נתונים | פעולות |
|--------|-------------|--------|
| כותרת | "יום 3" + תאריך (למשל 15.3.2025) | — |
| לינה היום | Accommodation שבו date בתוך [checkIn, checkOut] | קישור לפרטים, "נווט" |
| רשימת פעילויות | Activity עם dayIndex = היום | גרירה, עריכה, מחיקה, "נווט" |
| אטרקציות היום | Attraction ש־dayIndexes מכיל את היום | קישור, "נווט" |
| מפת היום | כל הכתובות של פעילויות + לינה + אטרקציות | סיכום על מפה, לחיצה לניווט |

### 3.3 זרימה
1. משתמש בוחר טיול → רשימת ימים (או לוח).
2. לחיצה על יום → כניסה ל"מבט יום".
3. במבט יום: לינה למעלה, אחר כך רשימת פעילויות, אז אטרקציות, ולבסוף מפה (או מפה צמודה למעלה).

---

## 4. מפת מסכים (Navigation)

```
[כניסה] → Login / Register

[דף בית] → "הטיולים שלי"
    └── כפתור: "טיול חדש"
    └── כרטיס טיול → [טיול]

[טיול] → טאבים או תפריט צד:
    ├── ימים (רשימה) → [יום X]
    ├── מפה (מפת כל המיקומים)
    ├── לינה (רשימת כל מקומות הלינה)
    ├── אטרקציות (רשימה)
    ├── רשימות (קניות)
    └── מסמכים (צילומי מסמכים – הוספה, צפייה, מחיקה)

[יום X] → מבט יום (לוח זמנים + לינה + אטרקציות + מפת היום)
```

---

## 5. שפות תכנות ואסטרטגיה – המלצות

### 5.1 דרישות
- **קוד משותף** למובייל (iOS, Android) ו־Web.
- **פיתוח מהיר** ו־MVP בר־שמירה.
- **קהילה וכלים** זמינים.

---

### 5.2 אפשרות א': React + React Native (Expo) + Web

| שכבת | טכנולוגיה | הערה |
|------|------------|------|
| **לוגיקה + state** | TypeScript | שפה אחת לכל הפרויקט |
| **Web** | React (Vite / Next.js) | ממשק Web |
| **מובייל** | React Native עם Expo | קוד UI דומה ל־React, קומפוננטות native |
| **שיתוף קוד** | תיקייה משותפת (logic, api, types) | לוגיקה, טיפוסים, קריאות API |

**יתרונות**: קהילה ענקית, הרבה מפתחים מכירים React, שיתוף לוגיקה וטיפוסים.  
**חסרונות**: צריך לכתוב חלק מה־UI פעמיים (Web vs RN) אם רוצים חוויית native מלאה; אפשר לצמצם עם ספריות כמו React Native for Web.

**שפות**: **TypeScript** (מומלץ), JavaScript.

---

### 5.3 אפשרות ב': Flutter (Dart)

| שכבת | טכנולוגיה | הערה |
|------|------------|------|
| **הכל** | Flutter + Dart | מסך אחד למובייל + Web |
| **Web** | Flutter Web | קומפילציה ל־Web |

**יתרונות**: קוד UI אחד לכל הפלטפורמות, ביצועים טובים, UI אחיד.  
**חסרונות**: Flutter Web עדיין כבד יותר מ־React; פחות מפתחים ב־Dart.

**שפות**: **Dart** בלבד.

---

### 5.4 אפשרות ג': PWA (Progressive Web App) – Web First

| שכבת | טכנולוגיה | הערה |
|------|------------|------|
| **Frontend** | React + TypeScript (או Vue, Svelte) | אפליקציית Web אחת |
| **PWA** | Service Worker, manifest.json | התקנה למסך, cache ל־offline בסיסי |
| **מובייל** | אותה אפליקציה בדפדפן / "Add to Home Screen" | לא אפליקציה נפרדת בחנות |

**יתרונות**: קוד אחד בלבד, פריסה מהירה, עדכונים מיידיים.  
**חסרונות**: מגבלות בהרשאות (מצלמה, push), פחות "אפליקציה" בחנות.

**שפות**: **TypeScript** + **HTML/CSS**.

---

### 5.5 Backend (לכל האפשרויות)

| תפקיד | טכנולוגיה מומלצת | הערה |
|--------|-------------------|------|
| **API** | Node.js (Express / Fastify) או Next.js API Routes | אם בוחרים React/Next – שפה אחת (TypeScript) |
| **או** | Python (FastAPI) | אם נוח יותר עם Python |
| **מסד נתונים** | PostgreSQL או SQLite (להתחלה) | יחסי, מתאים לטיולים/ימים/פעילויות |
| **אימות** | JWT או sessions | התחברות מאובטחת |
| **אירוח** | Vercel (Next), Railway, Render, או Supabase (DB + Auth) | להקטנת תחזוקת שרת |

**שפות Backend**: **TypeScript** (אם Full-Stack JS) או **Python**.

---

## 6. אסטרטגיית פיתוח מומלצת

### 6.1 בחירת מסלול
לשילוב **Web + מובייל** עם סיכון נמוך ומהירות:

1. **שלב 1 – Web + PWA**  
   - לבנות את כל ה־MVP כ־**React (או Next.js) + TypeScript**.  
   - להוסיף PWA (manifest + Service Worker) כדי לאפשר "התקנה למסך" במובייל.  
   - כך יש **אפליקציה אחת** שעובדת בדפדפן ובמובייל.

2. **שלב 2 – אפליקציה native (אם צריך)**  
   - אם תרצה אפליקציה בחנות (App Store / Play):  
     - **אופציה א** – React Native (Expo) ולשתף לוגיקה/API עם ה־Web.  
     - **אופציה ב** – עטיפה ל־PWA עם **Capacitor** או **TWA** (Trusted Web Activity) – בעצם אותו Web בתוך אפליקציה.

### 6.2 סדר פיתוח מוצע (לפי שבועות/ספרינטים)

| שלב | תוכן | תוצאה |
|-----|------|--------|
| **1** | סביבת פיתוח, פרויקט (React/Next + TS), רישום/התחברות בסיסי | משתמש יכול להירשם ולהתחבר |
| **2** | CRUD טיולים, חישוב ימים מתאריכים | יצירה, עריכה, מחיקה, רשימת טיולים |
| **3** | פעילויות ליום, מסך "מבט יום" | לוח זמנים יומי, הוספה/עריכה/מחיקה |
| **4** | לינה + אטרקציות, שיוך לימים | רשימות לינה ואטרקציות, הצגה במבט יום |
| **5** | רשימות קניות | רשימה עם סימון בוצע |
| **6** | מפות (הצגה + כפתור "נווט") | מפת יום, לינק ל־Google Maps/Waze |
| **7** | PWA (manifest, Service Worker, responsive) | "התקנה למסך", חוויית מובייל |
| **8** | צילומי מסמכים – העלאה, תצוגה, מחיקה (לפי טיול) | מסך "מסמכים" בטיול, אחסון תמונות |
| **9** | ליטושים, בדיקות, אירוח | MVP מוכן להעלאה |

### 6.3 עקרונות
- **להתחיל ב־Web** – בדיקות מהירות, שיתוף קל.
- **לעצב Mobile-First** – CSS responsive ו־touch, כדי ש־PWA במובייל יהיה נוח.
- **API ברור** – להפריד Frontend ↔ Backend מההתחלה (REST או GraphQL), כדי שאם תוסיף אפליקציה native – תשתמש באותו API.
- **מסד נתונים פשוט** – טבלאות User, Trip, Activity, Accommodation, Attraction, ShoppingItem, Document; להוסיף אינדקסים לפי `tripId`, `userId`.

---

## 7. סיכום המלצות

| נושא | המלצה |
|------|--------|
| **שפה** | **TypeScript** (Frontend + Backend אם Node/Next) |
| **Frontend Web** | **React** עם **Vite** או **Next.js** |
| **מובייל בשלב 1** | **PWA** (אותה אפליקציית Web) |
| **מובייל בשלב 2** | **Capacitor** (עטיפה ל־Web) או **React Native (Expo)** אם רוצים אפליקציה native מלאה |
| **Backend** | **Node.js (Express/Fastify)** או **Next.js API**; אופציה: **Supabase** ל־DB + Auth |
| **DB** | **PostgreSQL** (או SQLite לפיתוח) |

בשלב הבא אפשר:  
- להגדיר את מבנה התיקיות של הפרויקט (Frontend + Backend),  
- או להתחיל בסקיצת API (endpoints) לכל ה־CRUD של הטיול, הימים והפעילויות.
