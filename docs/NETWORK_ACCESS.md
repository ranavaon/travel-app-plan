# גישה לאפליקציה ממכשירים ומשתמשים אחרים

כדי שמכשירים אחרים (טלפון, מחשבים ברשת) או משתמשים באינטרנט יוכלו להשתמש באפליקציה, יש שתי דרכים עיקריות.

---

## 1. גישה ברשת המקומית (LAN) – אותו בית/משרד

מתאים לבדיקות ולשימוש כשכל המכשירים באותה רשת WiFi.

### מה לעשות

1. **להריץ את ה-Backend כך שיאזין לכל הממשקים**  
   ה-Backend כבר מוגדר להאזין על `0.0.0.0` (כל כתובת), כך שמכשירים ברשת יכולים להתחבר אליו.

2. **להריץ את ה-Frontend (Vite) עם גישה ברשת**  
   ב-`frontend/vite.config.ts` מופעל `server.host: true` – בפעם הראשונה ש-Vite רץ תקבל גם כתובת ברשת, למשל:
   ```text
   ➜  Local:   http://localhost:5173/
   ➜  Network: http://192.168.1.5:5173/
   ```

3. **להגדיר את כתובת ה-API במחשב שבו רץ ה-Backend**  
   - גלה את כתובת ה-IP של המחשב ברשת (ב-Mac: System Settings → Network; ב-Windows: `ipconfig`).
   - ב-`frontend/.env` הגדר:
     ```env
     VITE_API_URL=http://192.168.1.5:3001
     ```
     (החלף `192.168.1.5` ב-IP האמיתי של המחשב שבו רץ ה-Backend.)
   - הפעל מחדש את שרת ה-Frontend (`npm run dev`).

4. **לפתוח מהמכשיר השני**  
   בדפדפן במכשיר השני (באותה רשת) פתח:
   ```text
   http://192.168.1.5:5173
   ```
   (אותו IP שהגדרת ב-`VITE_API_URL`, עם פורט 5173.)

### הערות ל-LAN

- **חומת אש:** אם יש חומת אש, יש לפתוח פורטים 3001 (Backend) ו-5173 (Frontend בפיתוח).
- **קישורי שיתוף:** קישורי שיתוף טיול שנפתחים ממכשיר ברשת יופנו לאותו `host:port` (למשל `http://192.168.1.5:5173`) – מתאים כשכולם באותה רשת.
- **חזרה ל-localhost:** כשאתה עובד רק על המחשב שלך, אפשר להחזיר ב-`frontend/.env` את `VITE_API_URL=http://localhost:3001`.

---

## 2. גישה באינטרנט (Production)

כדי שמשתמשים יגיעו לאפליקציה מכל מקום (לא רק ברשת הביתית) צריך להעלות (לפרוס) את האפליקציה לשרת עם כתובת ופומבית (דומיין או IP) ו-HTTPS.

**מדריך פריסה מוכן (Render, חינם):** [docs/DEPLOYMENT.md](DEPLOYMENT.md)

### אפשרויות טיפוסיות

- **שרת (VPS)** – למשל DigitalOcean, Linode, AWS – להריץ שם את ה-Backend (Node) ולהגיש את ה-Frontend (build סטטי) דרך Nginx או שרת דומה.
- **PaaS** – Railway, Render, Fly.io וכו': מעלים את ה-Backend; את ה-Frontend ב-build סטטי מגישים דרך אותו שירות או CDN.
- **Docker** – אם יש לך `Dockerfile` (למשל ב-`backend/`), אפשר להריץ בשרת או ב-PaaS עם Docker.

### מה להגדיר ב-Production

1. **Backend**
   - `PORT` – הפורט שהשירות מאזין עליו (לעיתים נקבע אוטומטית ב-PaaS).
   - `JWT_SECRET` – מפתח סודי חזק וייחודי.
   - `GOOGLE_CLIENT_ID` / `APPLE_CLIENT_ID` – לפי ה-OAuth (ואם רלוונטי: redirect URIs בדומיין ה-Production).
   - מסד נתונים – ב-Production עדיף PostgreSQL או שירות מנוהל (לא רק SQLite מקומי).

2. **Frontend (build)**  
   בזמן בניית ה-Frontend (`npm run build`) יש להגדיר את כתובת ה-API הסופית:
   ```env
   VITE_API_URL=https://api.yourdomain.com
   ```
   (או הכתובת שהשירות נותן, למשל `https://your-app.onrender.com`.)

3. **HTTPS ודומיין**  
   - להשתמש ב-HTTPS (ב-PaaS לרוב ניתן בחינם).
   - להגדיר ב-Google/Apple OAuth את ה-redirect URIs עם הדומיין האמיתי.

4. **CORS**  
   ה-Backend משתמש ב-`cors({ origin: true })` – מתאים לרוב המקרים. אם תגביל דומיינים, עדכן בהתאם.

---

## סיכום

| מצב              | איפה להריץ           | VITE_API_URL (דוגמה)        | מי נכנס |
|------------------|----------------------|-----------------------------|---------|
| פיתוח מקומי      | המחשב שלך            | `http://localhost:3001`      | רק אתה  |
| רשת מקומית (LAN) | מחשב אחד ברשת        | `http://192.168.x.x:3001`    | מכשירים באותה רשת |
| Production       | שרת / PaaS           | `https://api.yourdomain.com`| כולם    |
